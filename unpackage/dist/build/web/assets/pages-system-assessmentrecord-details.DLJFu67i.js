import{_ as t,e,q as a,an as l,H as s,c as r,w as d,i,o as c,h as n,k as u,t as o,A as f,v as _,p as m}from"./index-BQ2OFzYe.js";const v=e.database();const p=t({data:()=>({details:null}),onLoad(t){t.id&&this.getDetails(t.id)},methods:{formatTime(t){if(!t)return"-";const e=new Date(t);if(isNaN(e.getTime()))return"-";return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`},formatDuration(t){if(!t&&0!==t)return"-";const e=Math.floor(t/60),a=Math.floor(t%60);return e>0?`${e}小时${a>0?a+"分钟":""}`:`${a}分钟`},getScoreClass:t=>t||0===t?t>=90?"score-excellent":t>=80?"score-good":t>=60?"score-fair":"score-poor":"",async getDetails(t){try{const e=await v.collection("AssessmentRecord").doc(t).get();e.result.data&&e.result.data.length>0&&(this.details=e.result.data[0])}catch(e){a({title:"获取详情失败",icon:"error"})}},copyUrl(t){l({data:t,success:()=>{a({title:"复制成功",icon:"success"})}})},goBack(){this.getOpenerEventChannel().emit("refreshData"),s()}}},[["render",function(t,e,a,l,s,v){const p=_,g=m,b=i;return c(),r(b,{class:"detail-container"},{default:d((()=>[n(b,{class:"detail-card"},{default:d((()=>[n(b,{class:"card-header"},{default:d((()=>[n(p,{class:"header-title"},{default:d((()=>[u("测评详情")])),_:1}),n(g,{onClick:v.goBack,class:"uni-button",type:"default",size:"mini"},{default:d((()=>[u("返回")])),_:1},8,["onClick"])])),_:1}),n(b,{class:"basic-info"},{default:d((()=>[n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("主播姓名：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.name)||"-"),1)]})),_:1})])),_:1}),n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("记录ID：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.recordId)||"-"),1)]})),_:1})])),_:1}),n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("用户ID：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.userId)||"-"),1)]})),_:1})])),_:1}),n(b,{class:"info-item"},{default:d((()=>{var t;return[n(p,{class:"label"},{default:d((()=>[u("得分：")])),_:1}),n(p,{class:f(["score-value",v.getScoreClass(null==(t=s.details)?void 0:t.score)])},{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.score)||"-"),1)]})),_:1},8,["class"])]})),_:1}),n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("测评时间：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o(v.formatTime(null==(t=s.details)?void 0:t.assessmentTime)||"-"),1)]})),_:1})])),_:1}),n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("持续时间：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o(v.formatDuration(null==(t=s.details)?void 0:t.duration)||"-"),1)]})),_:1})])),_:1})])),_:1}),n(b,{class:"metrics-detail"},{default:d((()=>[n(b,{class:"section-title"},{default:d((()=>[u("资源信息")])),_:1}),n(b,{class:"metric-card"},{default:d((()=>[n(b,{class:"metric-content"},{default:d((()=>[n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("文件ID：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.fileId)||"-"),1)]})),_:1})])),_:1}),n(b,{class:"info-item"},{default:d((()=>[n(p,{class:"label"},{default:d((()=>[u("Token数：")])),_:1}),n(p,null,{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.totaltoken)||0),1)]})),_:1})])),_:1}),n(b,{class:"info-item"},{default:d((()=>{var t;return[n(p,{class:"label"},{default:d((()=>[u("文件链接：")])),_:1}),(null==(t=s.details)?void 0:t.uploadUrl)?(c(),r(b,{key:0,class:"link-group"},{default:d((()=>[n(p,{class:"link-text"},{default:d((()=>[u(o(s.details.uploadUrl),1)])),_:1}),n(g,{class:"uni-button",type:"primary",size:"mini",onClick:e[0]||(e[0]=t=>v.copyUrl(s.details.uploadUrl))},{default:d((()=>[u("复制")])),_:1})])),_:1})):(c(),r(p,{key:1},{default:d((()=>[u("-")])),_:1}))]})),_:1})])),_:1})])),_:1})])),_:1}),n(b,{class:"metrics-detail"},{default:d((()=>[n(b,{class:"section-title"},{default:d((()=>[u("报告")])),_:1}),n(b,{class:"metric-card"},{default:d((()=>[n(b,{class:"metric-content"},{default:d((()=>[n(b,{class:"content-section"},{default:d((()=>[n(b,{class:"report-content"},{default:d((()=>[n(p,{class:"report-text","user-select":""},{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.text)||"暂无文本内容"),1)]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),n(b,{class:"metrics-detail"},{default:d((()=>[n(b,{class:"section-title"},{default:d((()=>[u("视频内容")])),_:1}),n(b,{class:"metric-card"},{default:d((()=>[n(b,{class:"metric-content"},{default:d((()=>[n(b,{class:"content-section"},{default:d((()=>[n(b,{class:"report-content"},{default:d((()=>[n(p,{class:"report-text","user-select":""},{default:d((()=>{var t;return[u(o((null==(t=s.details)?void 0:t.record)||"暂无记录内容"),1)]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-e8b3d226"]]);export{p as default};
